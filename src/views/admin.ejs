<!DOCTYPE html>
<html lang="tr">

<head>
    <meta charset="UTF-8">
    <title>Admin Panel</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet"
        crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/css/admin.css">
</head>

<body>
    <div class="container mt-4 admin-container">
        <div class="admin-content">
            <nav class="px-3 py-2" id="nav-bar">
                <div class="container-fluid d-flex flex-wrap align-items-center justify-content-between">
                    <div class="fs-5 fw-bold">Admin Panel</div>
                    <div class="d-flex flex-wrap gap-3">
                        <div class="nav-bar-btn text-white px-3 py-2 rounded hover-bg" id="users-btn">Users List</div>
                        <div class="nav-bar-btn text-white px-3 py-2 rounded hover-bg" id="one-btn">one</div>
                        <div class="nav-bar-btn text-white px-3 py-2 rounded hover-bg" id="two-btn">two</div>
                        <div class="nav-bar-btn text-white px-3 py-2 rounded hover-bg" id="three-btn">three</div>
                        <div class="nav-bar-btn text-white px-3 py-2 rounded hover-bg" id="four-btn">four</div>
                    </div>
                </div>
            </nav>
            <br>
            <div id="main-screen">
                <div class="screen" id="users-screen">
                    <% if (idAdmin) { %>
                        <div class="table-responsive rounded shadow-sm">
                            <table
                                class="table table-bordered table-hover table-striped align-items-center justify-content text-center bg-white">
                                <thead class="table-primary text-dark">
                                    <tr>
                                        <th>#</th>
                                        <th>Users Name</th>
                                        <th>Email</th>
                                        <th>ID</th>
                                        <th>Google ID</th>
                                        <th>Admin Status</th>
                                        <th>CreatedAt</th>
                                        <th>Approved Status</th>
                                    </tr>
                                </thead>
                                <tbody>
                                    <% allUser.forEach((user, index)=> {
                                        // satır rengi
                                        let rowClass = '';
                                        if (user.idAdmin) {
                                        rowClass = 'table-primary'; // admin ⇒ mavi
                                        } else if (!user.approvedStatus) {
                                        rowClass = 'table-danger'; // onaysız ⇒ kırmızı
                                        }
                                        %>
                                        <tr class="<%= rowClass %>" data-bs-toggle="modal" data-bs-target="#userModal"
                                            data-name="<%= user.name %>" data-email="<%= user.email %>"
                                            data-id="<%= user._id %>" data-googleid="<%= user.googleId || '-' %>"
                                            data-admin="<%= user.idAdmin %>"
                                            data-approved="<%= user.approvedStatus ? 'Approved' : 'Not Approved' %>"
                                            data-created="<%= new Date(user.createdAt).toLocaleDateString('tr-TR') %>"
                                            style="cursor:pointer;">
                                            <th scope="row">
                                                <%= index + 1 %>
                                            </th>
                                            <td>
                                                <%= user.name %>
                                            </td>
                                            <td>
                                                <%= user.email %>
                                            </td>
                                            <td>
                                                <%= user._id %>
                                            </td>
                                            <td>
                                                <%= user.googleId || '-' %>
                                            </td>
                                            <td>
                                                <%= user.idAdmin %>
                                            </td>
                                            <td>
                                                <%= new Date(user.createdAt).toLocaleDateString('tr-TR') %>
                                            </td>
                                            <td>
                                                <%= user.approvedStatus ? 'Approved' : 'Not Approved' %>
                                            </td>
                                        </tr>
                                        <% }); %>
                                </tbody>

                            </table>
                        </div>
                        <% } else { %>
                            <div class="alert alert-warning mt-3">Unaouthorizotion access</div>
                            <% } %>
                </div>
                <div class="screen" id="one-screen">
                    <h3>-</h3>
                </div>
                <div class="screen" id="two-screen">
                    <h3>-</h3>
                </div>
                <div class="screen" id="three-screen">
                    <h3>-</h3>
                </div>
                <div class="screen" id="four-screen">
                    <h3>-</h3>
                </div>
            </div>
        </div>
    </div>

    <!--* User Modal -->
    <div class="modal fade" id="userModal" tabindex="-1" aria-labelledby="userModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-dialog-centered modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="userModalLabel">Kullanıcı Detayları</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Kapat"></button>
                </div>
                <div class="modal-body">
                    <p><strong>Name:</strong> <span id="modalUserName"></span></p>
                    <p><strong>Email:</strong> <span id="modalUserEmail"></span></p>
                    <p><strong>ID:</strong> <span id="modalUserID"></span></p>
                    <p><strong>Google ID:</strong> <span id="modalGoogleID"></span></p>
                    <p><strong>Admin Status:</strong> <span id="modalAdminStatus"></span></p>
                    <p><strong>Created At:</strong> <span id="modalCreatedAt"></span></p>
                    <p><strong>Approved Status:</strong> <span id="modalApprovedStatus"></span></p>
                </div>
            </div>
        </div>
    </div>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        crossorigin="anonymous"></script>
    <script defer src="/js/admin.js"></script>

</body>

</html>
